{% extends "base.html" %}

{% block content %}

{% if lesson %}
    <h2>{{ lesson.name }}</h2>
    <p>{{ lesson.tutorial }}</p>
	
    {% for ref in lesson.lessonreferencesreference_set.all %}
        <i>Material taken from <a href="{{ ref.reference.url}}">{{ ref.reference.name}}</a> by {{ ref.reference.author}}</i><br />
    {% endfor %}
	
    {% if lesson.example_set.all %}
        <h3>Worked examples</h3>
        {% for example in lesson.example_set.all %}
            <p>Problem: {{ example.problem }}</p>
            <p>Solution: {{ example.solution }}</p>
        {% endfor %}
    {% else %}
        <p>No worked examples are available for this lesson.</p>
    {% endif %}
    {% if questions_exist %}
        <a href="{% url 'lessons:rand_question' lesson_name=lesson.name.split|join:'_' %}">Test me</a>
    {% else %}
        <p>No questions for this lesson.</p>
    {% endif %}
    <h4>Next Lessons</h4>
    {% if next_lessons %}
        <ul>
        {% for lesson in next_lessons %}
            <li><a href="{% url 'lessons:read' lesson.leads_to.name.split|join:'_' %}">{{ lesson.leads_to.name }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No Follow up lessons, I am really sorry and hope that you can find it in your hearts of hearts to forgive me. :( (a)</p>
    {% endif %}
	
{% else %}
    <p>Lesson not working.</p>
{% endif %}

{% endblock %}
