{% extends "base.html" %}

{% block head %}
	<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="/static/javascript/flot/excanvas.min.js"></script><![endif]-->
	<script type="text/javascript" src="/static/javascript/flot/jquery.flot.js"></script>
	<script type="text/javascript" src="/static/javascript/flot/jquery.flot.time.js"></script>
	<script type="text/javascript">
	$(function() 
	{
	
		var lessons = {{ lessons|safe }};
		var questions = {{ questions|safe }};
		
		$.plot($("#placeholder"), [{label: 'Lessons', data: lessons}, {label: 'Questions', data: questions }], {yaxis: { minTickSize: 1 }, xaxis: { mode: "time", timeformat: "%d/%m/%Y"}, legend: {show: true}});
	});
	</script>
{% endblock %}

{% block content %}

{% if cur_user %}
	<div id=profile>
		<h2>Personal Details</h2>
		<p><img src="http://www.gravatar.com/avatar/{{ cur_user_p.gravatar_hash }}?s=64&d=identicon" /> {# TODO maybe https?! #}
		{{ cur_user.first_name }} {{ cur_user.last_name}} ({{ cur_user.username }})</p>
		<p>Website: <a href="{{ cur_user_p.website }}">{{ cur_user_p.website }}</a></p>
		<p>Joined: {{ cur_user.date_joined }}</p>
		<p>About: {{ cur_user_p.about }}</p>
	</div>
	<div id=full_stats>
		<h2>Statistics</h2>
		<p>Lessons Taken: {{num_lessons}}</p>
		<p>Unique Lessons Taken: {{unique_lessons}}</p>
		<p>Questions Answered: {{num_answered}}</p>
		<p>Percent Correct: {{percent_correct}}%</p>
		<p>Most Common Mistakes</p>
	</div>
	<div id=activity>
		<h2>Activity Graph</h2>
		<div class="demo-container">
			<div id="placeholder" class="demo-placeholder" style="width:1200px;height:300px"></div>
		</div>
	</div>
{% else %}
    <p>User profile not working.</p>
{% endif %}

{% endblock %}
